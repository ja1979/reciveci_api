<!DOCTYPE html>
<html>
<head>
  <title>Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">


   <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
   <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
   <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>


   <style>
         body {
          padding: 0;
          margin: 0;
      }
      html, body, #map {
          height: 100%;
      }
   </style>   

</head>
<body>

	 <!--div id="map" style="width: 400px; height: 600px"></div-->
   <div id="map"></div>

	<script>

		var map = L.map('map').setView([-0.181451, -78.480030], 16);


  		L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6IjZjNmRjNzk3ZmE2MTcwOTEwMGY0MzU3YjUzOWFmNWZhIn0.Y8bhBaUMqFiPrDRW9hieoQ', {
      attribution: 'Map data &copy; <a href="http://openo streetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
      maxZoom: 20,
      id: 'mapbox.streets'
  }).addTo(map);


    function style(feature) {
      return {color: feature.properties.color};
    }



    var district_boundary = new L.geoJson();
    district_boundary.addTo(map);
    var routes;


    function onEachFeature(feature, layer) {
        // does this feature have a property named popupContent?
        if (feature.properties && feature.properties.schedule) {
            console.log("Setting popup...");
            layer.bindPopup(feature.properties.popup);
        }
    }


   $.getJSON("map/routes.json", function(data) {

      var myStyle = {
          "color": "#1145ff",
          "weight": 6,
          "opacity": 0.4
      };  

      routes = data ;
      //console.log(routes);
      L.geoJson(routes, {style: style, onEachFeature: onEachFeature}).addTo(map);
    });




    var popup = L.popup();
    
    function onMapClick(e)  {
        popup
            .setLatLng(e.latlng)
            .setContent(e.latlng.lng + ", " + e.latlng.lat)
            .openOn(map);
    }

    map.on('click', onMapClick);



  

//    L.geoJson(geojsonFeature, {
//        style: myStyle
//    }).addTo(map);



    

	</script>

</body>
</html>
